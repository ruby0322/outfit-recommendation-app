import { getFavoriteByUserId } from "@/actions/favorite";
import { getPreviewsByUserId } from "@/actions/utils/user";
import ItemList from "@/components/item/item-list";
import ItemListSkeleton from "@/components/item/item-list-skeleton";
import PreviewList from "@/components/preview-list";
import UnderConstruction from "@/components/under-construction";
import { createClient } from "@/utils/supabase/server";

const FAVORITE_QUOTES = [
  "èˆ‡ä½ ç›¸é‡ï¼Œå¥½å¹¸é‹ã€‚âœ¨",
  "èŒ«èŒ«äººæµ·ï¼Œååé‡è¦‹äº†å®ƒã€‚ðŸ’«",
  "æœ‰ç·£åƒé‡Œä¾†æ”¶è—ã€‚ðŸ“¦",
  "æˆ–è¨±é€™å°±æ˜¯è¨»å®šçš„ç·£åˆ†ã€‚ðŸ”—",
  "å–œæ­¡æ˜¯ä¸€ç¨®å¥‡å¦™çš„ç·£åˆ†ã€‚â¤ï¸",
  "ç¸½æœ‰äº›æ±è¥¿ï¼Œå€¼å¾—è¢«çè—ã€‚ðŸª„",
  "æœ‰ç·£é‡è¦‹ï¼Œä¹Ÿè¨±å°±æ˜¯ç‚ºäº†æ“æœ‰ã€‚ðŸŒŸ",
  "å®ƒåœç•™åœ¨é€™è£¡ï¼Œç­‰çš„å°±æ˜¯ä½ ã€‚ðŸ•’",
  "åƒæŒ‘è¬é¸ï¼Œçµ‚æ–¼é‡è¦‹å¿ƒå‹•çš„å®ƒã€‚ðŸ’˜",
  "é€™æ®µç·£åˆ†ï¼Œè®“å®ƒæˆç‚ºä½ çš„å°ˆå±¬ã€‚ðŸŽ",
  "ä¸€åˆ‡éƒ½æ˜¯æœ€å¥½çš„å®‰æŽ’ã€‚ðŸ§¡",
  "é€™æ˜¯ç·£åˆ†ï¼Œä¹Ÿæ˜¯ä½ çš„é¸æ“‡ã€‚ðŸŒˆ",
  "é‡è¦‹å®ƒï¼Œæ˜¯å‘½é‹çš„é©šå–œã€‚ðŸŽ‰",
  "æ¯å€‹æ”¶è—ï¼Œéƒ½æ˜¯ä¸€æ®µæ•…äº‹çš„é–‹å§‹ã€‚ðŸ“–",
  "å®ƒæ˜¯å‘½ä¸­è¨»å®šçš„å­˜åœ¨ã€‚ðŸ”®",
  "å–œæ­¡ä¸éœ€è¦ç†ç”±ï¼Œé‡è¦‹å°±æ˜¯ç·£åˆ†ã€‚ðŸŽ¯",
  "æœ‰äº›ç¾Žå¥½ï¼Œå€¼å¾—è¢«æ°¸é è¨˜ä½ã€‚ðŸ–¼ï¸",
  "å‘½é‹è®“ä½ å€‘ç›¸é‡ï¼Œé¸æ“‡è®“å®ƒå±¬æ–¼ä½ ã€‚ðŸ’ž",
  "å®ƒçš„ç¾Žï¼Œå‰›å¥½æ˜¯ä½ éœ€è¦çš„ç­”æ¡ˆã€‚ðŸ’¡",
  "æœ€ç¾Žçš„æ”¶è—ï¼Œå°±æ˜¯èˆ‡ä½ ç›¸é‡ã€‚ðŸŒº",
  "ä¹Ÿè¨±ä¸‹ä¸€æ¬¡é‡è¦‹ï¼Œå°±ä¸æœƒå†éŒ¯éŽäº†ã€‚â³",
  "é€™ä¸€åˆ»ï¼Œä½ å€‘çš„ç·£åˆ†æ­£å¼é–‹å§‹ã€‚â›³",
  "æ¯å€‹å¿ƒå‹•ï¼Œéƒ½æ˜¯ä¸€ç¨®ç¨ç‰¹çš„é€£çµã€‚ðŸ’“",
  "å®ƒè¨»å®šç‚ºä½ è€Œä¾†ã€‚ðŸ›ï¸",
  "ç·£åˆ†ï¼Œç¸½æ˜¯æ‚„ç„¶é–“ç™¼ç”Ÿã€‚ðŸ¤",
  "å®ƒçš„å­˜åœ¨ï¼Œæ˜¯ç‚ºäº†è¢«çè¦–ã€‚ðŸŒ ",
  "å–œæ­¡æ˜¯çž¬é–“çš„æ„Ÿè¦ºï¼Œæ”¶è—æ˜¯æ°¸é çš„å¿ƒæ„ã€‚ðŸ“Œ",
  "ç¸½æœ‰äº›æ±è¥¿ï¼Œæ³¨å®šè¦é€²å…¥ä½ çš„ç”Ÿæ´»ã€‚ðŸŒŽ",
  "é‡è¦‹å®ƒï¼Œåƒé‡è¦‹ä¸€å€‹è€æœ‹å‹ã€‚ðŸ¤",
  "æ”¶è—å®ƒï¼Œå› ç‚ºå®ƒå€¼å¾—ã€‚ðŸŒ¼",
  "æœ‰äº›ç·£åˆ†ï¼Œå°±æ˜¯é€™éº¼ä¸å¯æ€è­°ã€‚âœ¨",
  "æˆ–è¨±é€™å°±æ˜¯æ‰€è¬‚çš„å¤©æ„ã€‚ðŸŒ™",
  "å®ƒç­‰å¾…äº†å¾ˆä¹…ï¼Œåªç‚ºé€™ä¸€åˆ»ã€‚ðŸŽ€",
  "èˆ‡å®ƒç›¸é‡ï¼Œæ˜¯ä¸€ç¨®é›£å¾—çš„å¹¸é‹ã€‚ðŸ’Ž",
  "å› ç‚ºæ‡‚å¾—ï¼Œæ‰€ä»¥é¸æ“‡ã€‚ðŸ“–",
  "é€™æ®µç·£åˆ†ï¼Œæ³¨å®šå±¬æ–¼ä½ ã€‚ðŸ’",
  "æ¯ä¸€æ¬¡æ”¶è—ï¼Œéƒ½æ˜¯ä¸€æ¬¡å¿ƒéˆçš„å¥‘åˆã€‚ðŸ«¶",
  "å®ƒå°±æ˜¯é‚£å€‹ä¸€ç›´åœ¨æ‰¾çš„ç­”æ¡ˆã€‚ðŸ”",
  "ä½ çš„å–œæ­¡ï¼Œè®“å®ƒæˆç‚ºç¨ä¸€ç„¡äºŒã€‚ðŸ†",
  "ç·£åˆ†çš„å¥‡å¦™ï¼Œç¸½åœ¨ä¸ç¶“æ„é–“å±•ç¾ã€‚ðŸŒŒ",
  "å–œæ­¡çš„ç†ç”±åƒåƒè¬ï¼Œæ”¶è—åªéœ€ä¸€çž¬é–“ã€‚âš¡",
  "å®ƒçš„ç¾Žå¥½ï¼Œå‰›å¥½å¡«æ»¿ä½ çš„æƒ³åƒã€‚ðŸ§©",
  "ç·£åˆ†æ˜¯å¥‡å¦™çš„ï¼Œå®ƒä¾†è‡ªæ¯ä¸€æ¬¡å¿ƒå‹•ã€‚â¤ï¸â€ðŸ”¥",
  "é‡è¦‹å®ƒï¼Œæ˜¯ä½ çš„å¹¸é‹ï¼Œä¹Ÿæ˜¯å®ƒçš„æ¦®å¹¸ã€‚ðŸŽ–ï¸",
  "æ¯å€‹è¢«çè—çš„ç‰©å“ï¼Œéƒ½æœ‰å®ƒçš„æ•…äº‹ã€‚ðŸ“œ",
  "é€™ä¸æ˜¯å¶ç„¶ï¼Œè€Œæ˜¯å‘½é‹çš„å®‰æŽ’ã€‚ðŸ””",
  "é‡è¦‹å°±æ˜¯ç·£åˆ†ï¼Œæ”¶è—è®“å®ƒå®Œæ•´ã€‚ðŸ§·",
  "ä½ çš„å–œæ­¡ï¼Œè®“é€™æ®µæ•…äº‹æ›´åŠ ç¾Žå¥½ã€‚ðŸŽ¨",
  "å®ƒçš„å­˜åœ¨ï¼Œæ˜¯ç‚ºäº†æˆç‚ºä½ çš„å°ˆå±¬ã€‚ðŸ¡"
];

function getRandomQuote(): string {
  const randomIndex = Math.floor(Math.random() * FAVORITE_QUOTES.length);
  return FAVORITE_QUOTES[randomIndex];
}

const ClosetPage = async () => {
  const supabase = createClient();
  const { data: { user } } = await supabase.auth.getUser();
  console.log(user)
  if (!user) return <></>;
  const favorites = await getFavoriteByUserId(user?.id);
  const previews = await getPreviewsByUserId(user?.id as string);

  return <div className='container mx-auto px-4 py-8'>
      <div className='flex w-full gap-2'>{!favorites ? (
        <ItemListSkeleton index={0} />
      ) : (
        <div className="w-full flex flex-col gap-8">
          <ItemList
            title='æˆ‘çš„æœ€æ„›'
            description={getRandomQuote()}
            series={favorites}
            id={0}
            index={0}
            expandOnMount={true}
            expandable={false}
          />
          <PreviewList
            title='ç©¿æ­æŽ¨è–¦'
            previews={previews}
            description='æ‚¨éŽåŽ»ä¸Šå‚³çš„æŽ¨è–¦ç…§ç‰‡éƒ½æœƒé¡¯ç¤ºåœ¨æ­¤ï¼Œé»žæ“Šåœ–ç‰‡æŸ¥çœ‹æŽ¨è–¦çµæžœ'
          />
        </div>
      )}</div>
  </div>;
  return <UnderConstruction />;
}

export default ClosetPage;